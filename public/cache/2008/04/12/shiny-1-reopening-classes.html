<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>	Shiny #1 - Reopening Classes
</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link type="text/css" charset="utf-8" media="all" rel="Stylesheet" href="/stylesheets/application.css" />
  <link rel="alternate" type="application/rss+xml" title="My new blog is the shit. isn't it" href="http://localhost:4000/articles.rss"/>
 </head>

<body>
<div id="container">
  <div id="header">
    <h1><span><a href="/">My new blog is the shit. isn't it</a></span></h1>
    <h2>My blog rocks!</h2>
    
  </div>

  <div id="page">
    <div id="content">
      
      

<div class="hentry" id="article-8">
  <h2 class="entry-title">
    <a href="/2008/04/12/shiny-1-reopening-classes">Shiny #1 - Reopening Classes</a>
  </h2>
  <div class="vcard">
    Posted by <span class="fn">blog owner</span>
  </div>
  <abbr class="published" title="">3 days ago</abbr>
  <br class="clear" />
  <div class="entry-content">
    <p>This is the first article in a new series I&#8217;m begging outlining code or concepts I think are <em>&#8220;shiny&#8221;</em>. Every article will feature Ruby, Rails, Merb or JavaScript. Sorry .NET developers, but no C# here.</p>


	<p>I thought I&#8217;d kick this off proper-like with a concept in Ruby which I really quite adore: reopening existing classes at runtime and adding functionality. If you&#8217;re new to Ruby, and particularly if you have a background working with statically typed languages, this concept is going to seem sort of foreign to you, as it did to me when I was first indoctrinated to the glamourous world of Ruby development.</p>


	<p>So you may be scratching your head at this point, and wondering why the heck you&#8217;d want to reopen a class while the app is running. Shouldn&#8217;t all the code for each class be typed into TextMate before the VM has a chance to parse it? The answer is: not always. This technique lets you do some really interesting things that can&#8217;t be achieved with statically typed, compiled languages.</p>


	<p>Say for some utterly insane reason (which could potentially alert the boys in white coats to come out to your coding lair(sp?) and scoop you up for all enternity), you think Ruby&#8217;s string class should have a to_java method. To add this in at runtime, all you have to do is reopen Ruby&#8217;s String class, and wang in (that&#8217;s a technical term by the way), your method. There are two ways to accomplish this.</p>


	<p>The first way is to simply define the string class in your code and write your method thusly:</p>


	<p>class String</p>


	<pre><code>def to_java
    # Put pure, unadulterated insanity code here 
    # to output a string as Java.
end</code></pre>


	<p>end</p>


	<p>The second way, is just as trivial to implement:</p>


	<p>String.class_eval do </p>


	<pre><code>def to_java
    # Put pure, unadulterated insanity code here 
    # to output a string as Java.
end</code></pre>


	<p>end</p>


	<p>Now in your code, you can do one of these:</p>


	<p>s = &#8220;public void iLoveJava() { }&#8221;.to_java</p>


	<p>This will now just magically work. Pretty effing cool, huh? I&#8217;ve used this concept for a number of things. In fact, I&#8217;m using it in the feather-tagging plugin, to add associations and fields to my article model. It simply rocks, nuff said!</p>
  </div>
  <ul class="meta">
    <li><a anchor="comments" href="/2008/04/12/shiny-1-reopening-classes">1 comments</a></li>
  </ul>
</div>
<h5>
  <a name="comments">Comments</a>
</h5>
<p><a href="#comment-form">Leave a response</a></p>
<ol class="comments" id="comments">
<!-- Put this in a partial. Actually I think we should reopen the article model, and stick in has_many :comments. do that. -->
  <li id="comment-2" class="comment">
    <div class="author">
      <cite><span class="author"><span>Michael Leung</span></span></cite> â€“ 
      <abbr title="2008-04-12T17:08:59-04:00"><span class="date">Apr 12 08 @ 05:08PM</span></abbr>
    </div>
    <div class="content">
      What?
    </div>
  </li>  
</ol>
<div>
<form method="post" id="comment-form" action="/comments/">    <fieldset>
      <legend>Comment</legend>
      <input type="hidden" class="hidden" value="8" name="comment[article_id]"/>
      <p>
        <label for="comment_name" class="text">Name:<label>
        <input type="text" class="text" name="comment[name]" id="comment_name" size="30"/>
      </p>
      <p>
        <label for="comment_email_address" class="text">Email Address:<label>
        <input type="text" class="text" name="comment[email_address]" id="comment_email_address" size="30"/>
      </p>
      <p>
      	<label class="text" for="comment_website">Website:</label>
        <input type="text" class="text" name="comment[website]" id="comment_website" size="30"/>
      </p>
	  <p>
	    <label class="text" for"comment_formatter">Formatter:</label>
	    <select name="comment[formatter]" id="comment_formatter"><option selected="selected" value="default">default</option><option value="textile">textile</option><option value="markdown">markdown</option></select>
	  </p>
      <p>
      	<label class="text" for="comment_comment">Comment:</label>
      	<textarea name="comment[comment]" rows="10" cols="30" id="comment_comment"></textarea>
      </p>
      <div class="formactions">
      	<button type="submit" class="submit">Post comment</button>
      </div>
    </fieldset>
</form></div>

      
    </div>

    <div id="sidebar">
              <div class="sidebar-node">
          <h3>About</h3>
          <p>I rock, and so does my blog I love it and so do you</p>
        </div>

	    <div id="feed-link">
  <h3>Syndicate</h3>
  <!-- <= image_tag 'feed_icon.png' > -->
  <a href="http://localhost:4000/articles.rss">Articles</a>
  <br />
  	<a href="http://localhost:4000/comments.rss">Comments</a>
	<br />
</div><style>
	.tag1 { font-size: 12px; }
	.tag2 { font-size: 14px; }
	.tag3 { font-size: 16px; }
	.tag4 { font-size: 18px; }
	.tag5 { font-size: 20px; }
</style>
<!-- I don't like this in the view. Hmmm... -->
  <div style="margin-top: 20px">
    <h3>Tags</h3>
      <a class="tag3" href="/tags/grr">grr</a>
      <a class="tag4" href="/tags/blah">blah</a>
      <a class="tag3" href="/tags/suck-it">suck it</a>
      <a class="tag3" href="/tags/biotch">biotch</a>
      <a class="tag2" href="/tags/this-is-a-tset">this is a tset</a>
  </div>
<br />
    </div>
    <br style="clear:both;" />
  </div>

  <div id="footer">
    <hr />
    <p><a href="/">My new blog is the shit. isn't it</a></p>
    <ul>
      <li>powered by <a href="http://featherblog.org">feather</a> /
          styled with <a href="http://quotedprintable.com/pages/scribbish">scribbish</a></li>
    </ul>
    
  </div>
</div>
</body>
</html>
